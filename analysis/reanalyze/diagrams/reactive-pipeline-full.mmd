graph TD
    annotations[annotations]
    exc_refs.exception_decls[exc_refs.exception_decls]
    type_deps.same_path_refs[type_deps.same_path_refs]
    file_collection[file_collection]
    decl_refs.value_decl_refs[decl_refs.value_decl_refs]
    type_deps.combined_refs_to[type_deps.combined_refs_to]
    type_deps.all_type_refs_from[type_deps.all_type_refs_from]
    type_deps.impl_needing_path2[type_deps.impl_needing_path2]
    exc_refs.resolved_refs_from[exc_refs.resolved_refs_from]
    exc_refs.resolved_refs[exc_refs.resolved_refs]
    type_deps.impl_to_intf_refs_path2[type_deps.impl_to_intf_refs_path2]
    file_deps_map[file_deps_map]
    decl_refs.with_value_refs[decl_refs.with_value_refs]
    type_deps.u1[type_deps.u1]
    cross_file_items[cross_file_items]
    decl_refs.decls_by_file[decl_refs.decls_by_file]
    type_deps.impl_to_intf_refs[type_deps.impl_to_intf_refs]
    solver.issues_by_file[solver.issues_by_file]
    liveness.annotated_roots[liveness.annotated_roots]
    solver.incorrect_dead_decls[solver.incorrect_dead_decls]
    type_deps.intf_to_impl_refs[type_deps.intf_to_impl_refs]
    type_deps.decl_by_path[type_deps.decl_by_path]
    type_deps.u2[type_deps.u2]
    solver.live_decls[solver.live_decls]
    type_deps.impl_decls[type_deps.impl_decls]
    liveness.all_roots[liveness.all_roots]
    liveness.external_type_refs[liveness.external_type_refs]
    decl_refs.combined[decl_refs.combined]
    type_refs_from[type_refs_from]
    liveness.type_refs_from[liveness.type_refs_from]
    solver.dead_decls_by_file[solver.dead_decls_by_file]
    liveness.external_value_refs[liveness.external_value_refs]
    liveness.value_refs_from[liveness.value_refs_from]
    value_refs_from[value_refs_from]
    solver.dead_decls[solver.dead_decls]
    exception_refs_collection[exception_refs_collection]
    type_deps.intf_decls[type_deps.intf_decls]
    file_data_collection[file_data_collection]
    solver.dead_module_issues[solver.dead_module_issues]
    decl_refs.with_type_refs[decl_refs.with_type_refs]
    decl_refs.type_decl_refs[decl_refs.type_decl_refs]
    files[files]
    solver.modules_with_reported[solver.modules_with_reported]
    liveness.externally_referenced[liveness.externally_referenced]
    liveness.edges[liveness.edges]
    solver.refs_token[solver.refs_token]
    liveness.live[liveness.live]
    solver.dead_modules_empty[solver.dead_modules_empty]
    decls[decls]
    type_deps.intf_to_impl_refs_join{join}
    liveness.external_value_refs_join{join}
    type_deps.impl_to_intf_refs_path2_join{join}
    solver.incorrect_dead_decls_join{join}
    liveness.value_refs_from_union{union}
    exc_refs.resolved_refs_join{join}
    type_deps.combined_refs_to_union{union}
    liveness.externally_referenced_union{union}
    liveness.all_roots_union{union}
    solver.dead_module_issues_join{join}
    solver.dead_decls_join{join}
    liveness.annotated_roots_join{join}
    decl_refs.value_decl_refs_join{join}
    type_deps.impl_to_intf_refs_join{join}
    solver.live_decls_join{join}
    decl_refs.with_value_refs_join{join}
    liveness.type_refs_from_union{union}
    type_deps.impl_needing_path2_join{join}
    solver.issues_by_file_join{join}
    liveness.external_type_refs_join{join}
    liveness.live_fp{fixpoint}
    decl_refs.type_decl_refs_join{join}
    type_deps.u2_union{union}
    decl_refs.combined_join{join}
    type_deps.u1_union{union}
    decl_refs.with_type_refs_join{join}
    annotations --> solver.incorrect_dead_decls_join
    annotations --> liveness.annotated_roots_join
    exc_refs.exception_decls --> exc_refs.resolved_refs_join
    type_deps.same_path_refs --> type_deps.u1_union
    file_collection -->|flatMap| file_data_collection
    decl_refs.value_decl_refs --> decl_refs.with_value_refs_join
    type_deps.combined_refs_to -->|flatMap| type_deps.all_type_refs_from
    type_deps.all_type_refs_from --> liveness.type_refs_from_union
    type_deps.impl_needing_path2 --> type_deps.impl_to_intf_refs_path2_join
    exc_refs.resolved_refs_from --> liveness.value_refs_from_union
    exc_refs.resolved_refs -->|flatMap| exc_refs.resolved_refs_from
    type_deps.impl_to_intf_refs_path2 --> type_deps.u2_union
    decl_refs.with_value_refs --> decl_refs.combined_join
    type_deps.u1 --> type_deps.u2_union
    cross_file_items -->|flatMap| exception_refs_collection
    decl_refs.decls_by_file --> decl_refs.type_decl_refs_join
    decl_refs.decls_by_file --> decl_refs.value_decl_refs_join
    type_deps.impl_to_intf_refs --> type_deps.u1_union
    solver.issues_by_file -->|flatMap| solver.modules_with_reported
    liveness.annotated_roots --> liveness.all_roots_union
    type_deps.intf_to_impl_refs --> type_deps.combined_refs_to_union
    type_deps.decl_by_path --> type_deps.intf_to_impl_refs_join
    type_deps.decl_by_path --> type_deps.impl_to_intf_refs_path2_join
    type_deps.decl_by_path --> type_deps.impl_needing_path2_join
    type_deps.decl_by_path --> type_deps.impl_to_intf_refs_join
    type_deps.decl_by_path -->|flatMap| type_deps.same_path_refs
    type_deps.u2 --> type_deps.combined_refs_to_union
    solver.live_decls --> solver.incorrect_dead_decls_join
    type_deps.impl_decls --> type_deps.impl_needing_path2_join
    type_deps.impl_decls --> type_deps.impl_to_intf_refs_join
    liveness.all_roots --> liveness.live_fp
    liveness.external_type_refs --> liveness.externally_referenced_union
    decl_refs.combined -->|flatMap| liveness.edges
    type_refs_from --> liveness.type_refs_from_union
    liveness.type_refs_from --> liveness.external_type_refs_join
    liveness.type_refs_from --> decl_refs.type_decl_refs_join
    solver.dead_decls_by_file --> solver.issues_by_file_join
    liveness.external_value_refs --> liveness.externally_referenced_union
    liveness.value_refs_from --> liveness.external_value_refs_join
    liveness.value_refs_from --> decl_refs.value_decl_refs_join
    value_refs_from -->|flatMap| solver.refs_token
    value_refs_from --> liveness.value_refs_from_union
    solver.dead_decls -->|flatMap| solver.dead_decls_by_file
    solver.dead_decls -->|flatMap| solver.dead_modules_empty
    exception_refs_collection --> exc_refs.resolved_refs_join
    type_deps.intf_decls --> type_deps.intf_to_impl_refs_join
    file_data_collection -->|flatMap| files
    file_data_collection -->|flatMap| file_deps_map
    file_data_collection -->|flatMap| cross_file_items
    file_data_collection -->|flatMap| type_refs_from
    file_data_collection -->|flatMap| value_refs_from
    file_data_collection -->|flatMap| annotations
    file_data_collection -->|flatMap| decls
    decl_refs.with_type_refs --> decl_refs.combined_join
    decl_refs.type_decl_refs --> decl_refs.with_type_refs_join
    solver.modules_with_reported --> solver.dead_module_issues_join
    liveness.externally_referenced --> liveness.all_roots_union
    liveness.edges --> liveness.live_fp
    solver.refs_token --> solver.issues_by_file_join
    liveness.live --> solver.live_decls_join
    liveness.live --> solver.dead_decls_join
    solver.dead_modules_empty --> solver.dead_module_issues_join
    decls --> solver.live_decls_join
    decls --> solver.dead_decls_join
    decls --> liveness.annotated_roots_join
    decls --> liveness.external_type_refs_join
    decls --> liveness.external_value_refs_join
    decls --> decl_refs.with_type_refs_join
    decls --> decl_refs.with_value_refs_join
    decls -->|flatMap| decl_refs.decls_by_file
    decls -->|flatMap| exc_refs.exception_decls
    decls -->|flatMap| type_deps.intf_decls
    decls -->|flatMap| type_deps.impl_decls
    decls -->|flatMap| type_deps.decl_by_path
    type_deps.intf_to_impl_refs_join --> type_deps.intf_to_impl_refs
    liveness.external_value_refs_join --> liveness.external_value_refs
    type_deps.impl_to_intf_refs_path2_join --> type_deps.impl_to_intf_refs_path2
    solver.incorrect_dead_decls_join --> solver.incorrect_dead_decls
    liveness.value_refs_from_union --> liveness.value_refs_from
    exc_refs.resolved_refs_join --> exc_refs.resolved_refs
    type_deps.combined_refs_to_union --> type_deps.combined_refs_to
    liveness.externally_referenced_union --> liveness.externally_referenced
    liveness.all_roots_union --> liveness.all_roots
    solver.dead_module_issues_join --> solver.dead_module_issues
    solver.dead_decls_join --> solver.dead_decls
    liveness.annotated_roots_join --> liveness.annotated_roots
    decl_refs.value_decl_refs_join --> decl_refs.value_decl_refs
    type_deps.impl_to_intf_refs_join --> type_deps.impl_to_intf_refs
    solver.live_decls_join --> solver.live_decls
    decl_refs.with_value_refs_join --> decl_refs.with_value_refs
    liveness.type_refs_from_union --> liveness.type_refs_from
    type_deps.impl_needing_path2_join --> type_deps.impl_needing_path2
    solver.issues_by_file_join --> solver.issues_by_file
    liveness.external_type_refs_join --> liveness.external_type_refs
    liveness.live_fp --> liveness.live
    decl_refs.type_decl_refs_join --> decl_refs.type_decl_refs
    type_deps.u2_union --> type_deps.u2
    decl_refs.combined_join --> decl_refs.combined
    type_deps.u1_union --> type_deps.u1
    decl_refs.with_type_refs_join --> decl_refs.with_type_refs

    classDef joinClass fill:#e6f3ff,stroke:#0066cc
    classDef unionClass fill:#fff0e6,stroke:#cc6600
    classDef fixpointClass fill:#e6ffe6,stroke:#006600
    class decl_refs.with_type_refs_join,decl_refs.combined_join,decl_refs.type_decl_refs_join,liveness.external_type_refs_join,solver.issues_by_file_join,type_deps.impl_needing_path2_join,decl_refs.with_value_refs_join,solver.live_decls_join,type_deps.impl_to_intf_refs_join,decl_refs.value_decl_refs_join,liveness.annotated_roots_join,solver.dead_decls_join,solver.dead_module_issues_join,exc_refs.resolved_refs_join,solver.incorrect_dead_decls_join,type_deps.impl_to_intf_refs_path2_join,liveness.external_value_refs_join,type_deps.intf_to_impl_refs_join joinClass
    class type_deps.u1_union,type_deps.u2_union,liveness.type_refs_from_union,liveness.all_roots_union,liveness.externally_referenced_union,type_deps.combined_refs_to_union,liveness.value_refs_from_union unionClass
    class liveness.live_fp fixpointClass

